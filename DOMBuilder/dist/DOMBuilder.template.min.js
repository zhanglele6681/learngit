/**
 * DOMBuilder 2.1.6 (modes: dom [default], html, template) - https://github.com/insin/DOMBuilder
 * MIT Licensed
 */
(function(){function r(b){return A[b]}var A={};r.define=function(b,m){var a={},f={};a.exports=f;m(a,f,r);if("[object Array]"==Object.prototype.toString.call(b))for(var f=0,e=b.length;f<e;f++)A[b[f]]=a.exports;else A[b]=a.exports};r.define(["isomorph/is","./is"],function(b){var m=Object.prototype.toString;b.exports={Array:function(a){return"[object Array]"==m.call(a)},Boolean:function(a){return"[object Boolean]"==m.call(a)},Date:function(a){return"[object Date]"==m.call(a)},Empty:function(a){for(var f in a)return!1;
return!0},Error:function(a){return"[object Error]"==m.call(a)},Function:function(a){return"[object Function]"==m.call(a)},NaN:isNaN,Number:function(a){return"[object Number]"==m.call(a)},Object:function(a){return"[object Object]"==m.call(a)},RegExp:function(a){return"[object RegExp]"==m.call(a)},String:function(a){return"[object String]"==m.call(a)}}});r.define("isomorph/object",function(b){var m=function(){var a=Object.prototype.hasOwnProperty;return function(f,e){return a.call(f,e)}}();b.exports=
{hasOwn:m,extend:function(a){for(var f=1,e=arguments.length,b;f<e;f++)if(b=arguments[f])for(var k in b)m(b,k)&&(a[k]=b[k]);return a},inherits:function(a,f){var e=function(){};e.prototype=f.prototype;a.prototype=new e;return a.prototype.constructor=a},items:function(a){var f=[],e;for(e in a)m(a,e)&&f.push([e,a[e]]);return f},fromItems:function(a){for(var f={},e=0,b=a.length,k;e<b;e++)k=a[e],f[k[0]]=k[1];return f},lookup:function(a){for(var f={},e=0,b=a.length;e<b;e++)f[""+a[e]]=!0;return f},get:function(a,
f,e){return m(a,f)?a[f]:e}}});r.define("isomorph/array",function(b,m,a){var f=a("./is"),e=Array.prototype.splice;b.exports={flatten:function(a){for(var b=0,h=a.length,l;b<h;b++)l=a[b],f.Array(l)&&(h+=l.length-1,e.apply(a,[b,1].concat(l)),b--);return a}}});r.define(["./dombuilder/core","./core"],function(b,m,a){function f(d,i){return!!d&&"[object Object]"==E.call(d)&&(!i||!n.modes[i].isModeObject(d))}function e(d){return"[object Array]"==E.call(d)&&"undefined"==typeof d.isElement}function t(d){d.isElement=
!0;return d}function k(d){for(var i={},c=0,a;a=s[c];c++)i[a.toUpperCase()]=h(a,d);return i}function h(d,i){var c=function(){if(arguments.length){var c=u.call(arguments),a,l=c.length,g=c[0];if(1===l&&e(g))c=g;else if(f(g,"undefined"!=typeof i?i:n.mode))a=g,c=2==l&&e(c[1])?c[1]:c.slice(1);return n.createElement(d,a,c,i)}return(a="undefined"!=typeof i?i:n.mode)?n.modes[a].createElement(d,{},[]):t([d])};c.map=function(){var c=u.call(arguments);if(e(c[0]))var a={},l=c[0],c=g.Function(c[1])?c[1]:null;else a=
c[0],l=c[1],c=g.Function(c[2])?c[2]:null;return n.map(d,a,l,c,i)};return c}function l(d,i){return{index:d,first:0==d,last:d==i-1}}var g=a("isomorph/is"),j=a("isomorph/object"),B=a("isomorph/array"),E=Object.prototype.toString,u=Array.prototype.slice,a=(m="undefined"!=typeof jQuery)?jQuery.attrFn:j.lookup("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" ")),
q=/^([a-z][a-z0-9]*)?(?:#([a-z][-:\w]*))?(?:\.([-\w]+(?:\.[-\w]+)*))?/i,s="a abbr acronym address area article aside audio b bdi bdo big blockquote body br button canvas caption cite code col colgroup command datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form frame frameset h1 h2 h3 h4 h5 h6 hr head header hgroup html i iframe img input ins kbd keygen label legend li link map mark meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt ul var video wbr".split(" "),
w=m?function(d,i){jQuery(d).html(i)}:function(d,i){try{d.innerHTML=i}catch(c){var a=document.createElement("div");for(a.innerHTML=i;d.firstChild;)d.removeChild(d.firstChild);for(;a.firstChild;)d.appendChild(a.firstChild)}},n={version:"2.1.1",mode:null,modes:{},addMode:function(d){d=j.extend({isModeObject:function(){return!1},api:{},apply:{}},d);this.modes[d.name]=d;this[d.name]=j.extend(k(d.name),d.apply);null===this.mode&&(this.mode=d.name)},withMode:function(d,i){var c=this.mode;this.mode=d;try{return i.apply(null,
u.call(arguments,2))}finally{this.mode=c}},elements:k(),array:k(null),apply:function(d,i){i&&this.modes[i]?j.extend(d,this[i]):j.extend(d,this.elements);return d},build:function(d,i){var i=i||this.mode,c=d[0],a="#document-fragment"==c,l=!a&&f(d[1],i)?d[1]:null,b=null===l?1:2,n=d.length,e=[];if(!a){null===l&&(l={});var j=q.exec(c);if(!j)throw Error(c+" is not a valid tag definition");c=j[1]||"div";j[2]&&(l.id=j[2]);j[3]&&(l["class"]=j[3].replace(/\./g," "))}for(j=b;j<n;j++)b=d[j],g.Array(b)?e.push(this.build(b,
i)):e.push(b);return a?this.modes[i].fragment(e):this.modes[i].createElement(c,l,e)},createElement:function(d,i,c,a){i=i||{};c=c||[];if(a="undefined"!=typeof a?a:this.mode)return B.flatten(c),this.modes[a].createElement(d,i,c);var d=[d],l;for(l in i){d.push(i);break}c.length&&(d=d.concat(c));return t(d)},textNode:function(d,a){a="undefined"!=typeof a?a:this.mode;return this.modes[a].textNode(d)},map:function(d,a,c,g,b){for(var f=[],w=0,B=c.length,k,h;w<B;w++){k=j.extend({},a);if(null!=g){if(h="undefined"!=
typeof b?n.withMode(b,g,c[w],k,l(w,B)):g(c[w],k,l(w,B)),null===h)continue}else h=c[w];e(h)||(h=[h]);f.push(this.createElement(d,k,h,b))}return f},fragment:function(){var d=function(){var d;d=1===arguments.length&&e(arguments[0])?arguments[0]:u.call(arguments);return this.mode?(B.flatten(d),this.modes[this.mode].fragment(d)):t(["#document-fragment"].concat(d))};d.map=function(d,a){if(!g.Function(a))return n.fragment(d);for(var b=[],f=0,e=d.length,j;f<e;f++)j=a(d[f],l(f,e)),null!==j&&(b=b.concat(j));
return n.fragment(b)};return d}(),util:{EVENT_ATTRS:a,FRAGMENT_NAME:"#document-fragment",JQUERY_AVAILABLE:m,TAG_NAMES:s,setInnerHTML:w}};b.exports=n});r.define("Concur",function(b,m,a){function f(a){var g=a.__mixin__;t.Array(g)||(g=[g]);for(var b={},f=0,e=g.length;f<e;f++){var h=b,m=g[f];t.Function(m)?k.extend(h,m.prototype):k.extend(h,m)}delete a.__mixin__;return k.extend(b,a)}function e(a,g,b){var f;f=g&&k.hasOwn(g,"constructor")?g.constructor:function(){a.apply(this,arguments)};a!==h&&(k.inherits(f,
a),f.__super__=a.prototype);g&&k.extend(f.prototype,g);b&&k.extend(f,b);return f}var t=a("isomorph/is"),k=a("isomorph/object"),h=b.exports=function(){};h.extend=function(a,g){"undefined"!=typeof this.prototype.__meta__&&(a=a||{},g=g||{},this.prototype.__meta__(a,g));a&&k.hasOwn(a,"__mixin__")&&(a=f(a));g&&k.hasOwn(g,"__mixin__")&&(g=f(g));var b=e(this,a,g);b.extend=this.extend;return b}});r.define("./dombuilder/dom",function(b,m,a){var b=a("./core"),f=a("isomorph/object"),e=window.document,t=b.util.EVENT_ATTRS,
k=b.util.setInnerHTML,h=b.util.JQUERY_AVAILABLE?function(a,b){if(f.hasOwn(b,"innerHTML")){var e=b.innerHTML;delete b.innerHTML;return jQuery("<"+a+">",b).html(e).get(0)}return jQuery("<"+a+">",b).get(0)}:function(){var a={tabindex:"tabIndex"},b={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
j=function(){var a=e.createElement("div");a.setAttribute("className","t");a.innerHTML='<span style="color:silver">s<span>';var b=a.getElementsByTagName("span")[0],d=e.createElement("input");d.value="t";d.setAttribute("type","radio");return{style:/silver/.test(b.getAttribute("style")),getSetAttribute:"t"!=a.className,radioValue:"t"==d.value}}(),h,m=function(a,f,d){!1!==f&&(f=b[d]||d,f in a&&(a[f]=!0),a.setAttribute(d,d.toLowerCase()));return d},u={type:function(a,b){if(!j.radioValue&&"radio"==b&&a.nodeName&&
"INPUT"==a.nodeName.toUpperCase()){var d=a.value;a.setAttribute("type",b);d&&(a.value=d);return b}},value:function(a,b,d){if(h&&a.nodeName&&"BUTTON"==a.nodeName.toUpperCase())return h(a,b,d);a.value=b}},q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,s=/\:|^on/;j.getSetAttribute||(a=b,h=u.name=u.title=function(a,b,d){if(a=a.getAttributeNode(d))return a.nodeValue=b},u.width=u.height=function(a,b){if(""===b)return a.setAttribute(name,
"auto"),b});j.style||(u.style=function(a,b){return a.style.cssText=""+b});return function(j,n){var d=e.createElement(j),i,c;if(f.hasOwn(n,"innerHTML")){k(d,n.innerHTML);delete n.innerHTML}for(i in n){c=n[i];if(t[i])d["on"+i]=c;else{var x=d,v=i;if("getAttribute"in x){var y=void 0,v=a[v]||v,y=u[v];if(!y)if(q.test(v))y=m;else if(h&&v!="className"&&(x.nodeName&&x.nodeName.toUpperCase()=="FORM"||s.test(v)))y=h;c!==void 0&&!(y&&y(x,c,v)!==void 0)&&x.setAttribute(v,""+c)}else{v=b[v]||v;c!==void 0&&(x[v]=
c)}}}return d}}();b.addMode({name:"dom",createElement:function(a,b,j){var k=f.hasOwn(b,"innerHTML"),a=h(a,b);if(!k)for(var k=0,b=j.length,m;k<b;k++)(m=j[k])&&m.nodeType?a.appendChild(m):a.appendChild(e.createTextNode(""+m));return a},textNode:function(a){return e.createTextNode(a)},fragment:function(a){for(var b=e.createDocumentFragment(),f=0,h=a.length,k;f<h;f++)k=a[f],k.nodeType?b.appendChild(k):b.appendChild(e.createTextNode(""+k));return b},isModeObject:function(a){return!!a.nodeType},api:{createElement:h}})});
r.define("./dombuilder/html",function(b,m,a){function f(a){this.value=a}function e(a){return new f(a)}function t(a){return a instanceof f}function k(a){return a instanceof f?a.value:n(""+a)}function h(a){this.childNodes=a||[];this._inlineFragments();this.firstChild=this.childNodes.length?this.childNodes[0]:null}function l(a,b,c){h.call(this,c);this.tagName=this.nodeName=a.toLowerCase();this.attributes=b||{}}function g(a){h.call(this,a)}var b=a("./core"),j=a("isomorph/object"),B=Array.prototype.splice,
r=b.util.EVENT_ATTRS,a=b.util.FRAGMENT_NAME,m=b.util.JQUERY_AVAILABLE,u=b.util.setInnerHTML,q=j.lookup(b.util.TAG_NAMES),s=j.lookup("area base br col command embed frame hr input img keygen link meta param source track wbr".split(" ")),w=m?function(a,b,c){jQuery("#"+a)[b](c)}:function(a,b,c){document.getElementById(a)["on"+b]=c};j.inherits(f,String);f.prototype.toString=f.prototype.valueOf=function(){return this.value};var n=function(){var a=/&/g,b=/</g,c=/>/g,f=/"/g,e=/'/g;return function(g){return g.replace(a,
"&amp;").replace(b,"&lt;").replace(c,"&gt;").replace(f,"&quot;").replace(e,"&#39;")}}();j.inherits(h,Object);h.prototype._inlineFragments=function(){for(var a=0,b=this.childNodes.length,c;a<b;a++)c=this.childNodes[a],c instanceof g&&(B.apply(this.childNodes,[a,1].concat(c.childNodes)),c._clear())};h.prototype.appendChild=function(a){a instanceof g?(this.childNodes=this.childNodes.concat(a.childNodes),a._clear()):this.childNodes.push(a);null===this.firstChild&&(this.firstChild=this.childNodes[0])};
h.prototype.cloneNode=function(a){var b=this._clone();if(!0===a)for(var c=0,f=this.childNodes.length,e;c<f;c++)e=this.childNodes[c],e instanceof l&&(e=e.cloneNode(a)),0===c&&(b.firstChild=e),b.childNodes.push(e);return b};h.prototype.hasChildNodes=function(){return!!this.childNodes.length};h.prototype.removeChild=function(a){if(null!==this.firstChild&&a===this.firstChild)return this.firstChild=1<this.childNodes.length?this.childNodes[1]:null,this.childNodes.shift();for(var b=1,c=this.childNodes.length;b<
c;b++)if(a===this.childNodes[b])return this.childNodes.splice(b,1)[0];throw Error("Node was not found");};h.prototype._clone=function(){return new Node};j.inherits(l,h);l.eventTrackerId=1;l.prototype.nodeType=1;l.prototype._clone=function(){return new l(this.tagName,j.extend({},this.attributes))};l.prototype.toString=function(a){var a="undefined"!=typeof a?a:!1,b=q[this.tagName]?this.tagName:k(this.tagName),c=["<"+b],e;for(e in this.attributes)"innerHTML"!==e&&(r[e]?!0===a&&!this.eventsFound&&(this.eventsFound=
!0):c.push(" "+k(e.toLowerCase())+'="'+k(this.attributes[e])+'"'));this.eventsFound&&!j.hasOwn(this.attributes,"id")&&(this.id="__DB"+l.eventTrackerId++ +"__",c.push(' id="'+this.id+'"'));c.push(">");if(s[b])return c.join("");if(j.hasOwn(this.attributes,"innerHTML"))c.push(this.attributes.innerHTML);else{e=0;for(var g=this.childNodes.length,h;e<g;e++)h=this.childNodes[e],h instanceof l||h instanceof f?c.push(h.toString(a)):c.push(n(""+h))}c.push("</"+b+">");return c.join("")};l.prototype.addEvents=
function(){if(this.eventsFound){var a=j.hasOwn(this.attributes,"id")?k(this.attributes.id):this.id,b;for(b in this.attributes)r[b]&&w(a,b,this.attributes[b]);delete this.eventsFound;delete this.id}a=0;b=this.childNodes.length;for(var c;a<b;a++)c=this.childNodes[a],c instanceof l&&c.addEvents()};l.prototype.insertWithEvents=function(a){u(a,this.toString(!0));this.addEvents()};j.inherits(g,h);g.prototype._clear=function(){this.childNodes=[];this.firstChild=null};g.prototype._clone=function(){return new g};
g.prototype.nodeType=11;g.prototype.nodeName=a;g.prototype.toString=function(a){for(var a="undefined"!=typeof a?a:!1,b=[],c=0,e=this.childNodes.length,g;c<e;c++)g=this.childNodes[c],g instanceof l||g instanceof f?b.push(g.toString(a)):b.push(n(""+g));return b.join("")};g.prototype.addEvents=function(){for(var a=0,b=this.childNodes.length,c;a<b;a++)c=this.childNodes[a],c instanceof l&&c.addEvents()};g.prototype.insertWithEvents=function(a){u(a,this.toString(!0));this.addEvents()};b.addMode({name:"html",
createElement:function(a,b,c){return new l(a,b,c)},textNode:function(a){return a},fragment:function(a){return new g(a)},isModeObject:function(a){return a instanceof h||a instanceof f},api:{escapeHTML:n,conditionalEscape:k,isSafe:t,markSafe:e,SafeString:f,HTMLNode:h,MockElement:l,MockFragment:g},apply:{isSafe:t,markSafe:e}})});r.define("./dombuilder/template",function(b,m,a){function f(a,b){for(var K=[],c=0,d=a.length,e;c<d;c++)e=a[c],e instanceof b&&K.push(e),e instanceof o&&"undefined"!=typeof e.contents&&
K.push.apply(K,f(e.contents,b));return K}function e(a){return a.replace("\\","\\\\").replace('"','\\"')}function t(a,b){for(var c=[],d=0,e=a.length,f;d<e;d++)(f=a[d])&&(f instanceof o||z.Function(f.render))?c.push(f.render(b)):c.push(f);return c}function k(){this.message="pop() was called more times than push()"}function h(a){this.message=a}function l(a){this.message=a}function g(a){this.message=a}function j(a,b){return(z.Array(a)?E(a):r(a)).render(b)}function r(a){if("undefined"==typeof L[a])throw new g(a);
return L[a]}function E(a){for(var b=[],c=0,d=a.length;c<d;c++)try{return r(a[c])}catch(f){b.push(a[c])}throw new g(b.join(", "));}function u(a){this.variable=new q(a)}function q(a,b){this.expr=a;this.callFunctions="undefined"!=typeof b?b:!0}function s(a){if(!(this instanceof s))return new s(a);this.stack=[a||{}];this.renderContext=new w}function w(a){this.stack=[a||{}]}function n(){this.blocks={}}function d(a,b){z.String(a)?this.name=a:(this.name=a.name,this.parent=a.extend||null);this.contents=b;
for(var c=f(b,i),d={},e,g=0;e=c[g];g++){if("undefined"!=typeof d[e.name])throw new l("Block with name '"+e.name+"' appears more than once.");d[e.name]=e}this.blocks=d;o.prototype.parseContents.call(this);L[this.name]=this}function i(a,b){this.name=z.String(a)?a:a.name;o.call(this,b)}function c(a,b,c){this.template=a;this.extraContext=b||{};this.only=c||!1}function x(a,b,c){this.tagName=a;this.attributes=p.extend({},b);this.dynamicAttrs=!1;for(var d in this.attributes)if(a=this.attributes[d],z.String(a)&&
M.test(a))this.attributes[d]=new C(a),this.dynamicAttrs||(this.dynamicAttrs=!0);else if((a instanceof o||a instanceof q)&&!this.dynamicAttrs)this.dynamicAttrs=!0;o.call(this,c)}function v(a,b){this._parseExpr(a);this.emptyContents=b.length&&b[b.length-1]instanceof y?b.pop().contents:[];o.call(this,b)}function y(a){o.call(this,a)}function H(a,b){this.test=z.Function(a)?a:this._parseExpr(a);this.elseContents=b.length&&b[b.length-1]instanceof I?b.pop().contents:[];o.call(this,b)}function I(a){o.call(this,
a)}function C(a){(this.dynamic=M.test(a))?this.func=this._parseExpr(a):this.text=a}function F(a,b){this.values=a;b=p.extend({as:null,silent:!1},b||{});this.variableName=b.as;this.silent=b.silent;this.id="cycle"+F.cycleId++}function A(a){this.version=a||5}var J=a("./core"),b=a("Concur"),z=a("isomorph/is"),p=a("isomorph/object"),D=a("isomorph/array"),G=Array.prototype.slice,Q=/( in )([\.\w_]+)$/,R=/, ?/,M=/{{(.*?)}}/,O=/^\s+|\s+$/g,P={4:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">',
5:"<!DOCTYPE html>"},L={},N=function(){var a={};return function(b,c){c.global||(p.hasOwn(a,c.source)||(a[c.source]=RegExp(c.source,"g")),c=a[c.source]);for(var d=[],e,f,g=0;e=c.exec(b);)f=e.index+e[0].length,f>g&&(d.push(b.slice(g,e.index)),1<e.length&&e.index<b.length&&d.push.apply(d,e.slice(1)),g=f),c.lastIndex===e.index&&c.lastIndex++;d.push(b.slice(g));return d}}();p.inherits(k,Error);p.inherits(h,Error);p.inherits(l,Error);p.inherits(g,Error);u.prototype.resolve=u.prototype.render=function(a,
b){var c;if(this.variable instanceof q)try{c=this.variable.resolve(a)}catch(d){if(!(d instanceof h))throw d;if(b)c=null;else throw d;}else c=this.variable;return c};q.prototype.resolve=q.prototype.render=function(a){var b=this.expr.split("."),c=b.shift(),d=a.get(c);if(a.hasKey(c))z.Function(d)&&this.callFunctions&&(d=d());else throw new h("Could not find ["+c+"] in "+a);if(b.length)for(var a=b.length,e=0;e<a;e++){c=b[e];if(null==d||"undefined"==typeof d[c])throw new h("Could not find ["+c+"] in "+
d);c=d[c];d=z.Function(c)&&this.callFunctions?c.call(d):c}return d};s.prototype.push=function(a){this.stack.push(a||{})};s.prototype.pop=function(){if(1==this.stack.length)throw new k;return this.stack.pop()};s.prototype.set=function(a,b){this.stack[this.stack.length-1][a]=b};s.prototype.zip=function(a,b){for(var c=this.stack[this.stack.length-1],d=Math.min(a.length,b.length),e=0;e<d;e++)c[a[e]]=b[e]};s.prototype.get=function(a,b){for(var c=this.stack.length-1;0<=c;c--)if(p.hasOwn(this.stack[c],a))return this.stack[c][a];
return void 0!==b?b:null};s.prototype.hasKey=function(a){for(var b=0,c=this.stack.length;b<c;b++)if(p.hasOwn(this.stack[b],a))return!0;return!1};p.inherits(w,s);w.prototype.get=function(a,b){var c=this.stack[this.stack.length-1];return p.hasOwn(c,a)?c[a]:void 0!==b?b:null};w.prototype.hasKey=function(a){return p.hasOwn(this.stack[this.stack.length-1],a)};n.prototype.addBlocks=function(a){for(var b in a)"undefined"!=typeof this.blocks[b]?this.blocks[b].unshift(a[b]):this.blocks[b]=[a[b]]};n.prototype.push=
function(a,b){this.blocks[a].push(b)};n.prototype.pop=function(a){return"undefined"!=typeof this.blocks[a]&&this.blocks[a].length?this.blocks[a].pop():null};n.prototype.getBlock=function(a){return"undefined"!=typeof this.blocks[a]&&(a=this.blocks[a],a.length)?a[a.length-1]:null};d.prototype.render=function(a){a instanceof s||(a=s(a));a.renderContext.push();try{return this._render(a)}finally{a.renderContext.pop()}};d.prototype._render=function(a){a.renderContext.hasKey("blockContext")||a.renderContext.set("blockContext",
new n);a.renderContext.get("blockContext").addBlocks(this.blocks);return this.parent?r(this.parent)._render(a):J.fragment(t(this.contents,a))};var o=b.extend({constructor:function(a){this.contents=a||[];this.contents.length&&this.parseContents()}});o.prototype.parseContents=function(){for(var a=0,b=this.contents.length,c;a<b;a++)c=this.contents[a],z.String(c)&&M.test(c)&&(this.contents[a]=new C(c))};p.inherits(i,o);i.prototype.render=function(a){var b=a.renderContext.get("blockContext"),c,d;a.push();
null===b?(a.set("block",this),c=t(this.contents,a)):(d=c=b.pop(this.name),null===c&&(c=this),c=new i(c.name,c.contents),c.context=a,a.set("block",c),c=t(c.contents,a),null!==d&&b.push(this.name,d));a.pop();return c};i.prototype["super"]=function(){var a=this.context.renderContext;return a.hasKey("blockContext")&&null!==a.get("blockContext").getBlock(this.name)?this.render(this.context):""};p.inherits(c,o);c.prototype.render=function(a){var b=this.template instanceof q?this.template.resolve(a):this.template,
b=z.Array(b)?E(b):r(b),c={},d,e;for(d in this.extraContext)e=this.extraContext[d],c[d]=e instanceof q?e.resolve(a):e;if(this.only)return b.render(c);a.push(c);d=b.render(a);a.pop();return d};p.inherits(x,o);x.prototype.render=function(a){return J.createElement(this.tagName,this.dynamicAttrs?this.renderAttributes(a):this.attributes,t(this.contents,a))};x.prototype.renderAttributes=function(a){var b={},c,d;for(c in this.attributes)d=this.attributes[c],d instanceof o?(d=d.render(a),z.Array(d)&&(d=D.flatten(d).join("")),
b[c]=d):b[c]=d instanceof q?d.resolve(a):d;return b};p.inherits(v,o);v.prototype._parseExpr=function(a){var b=N(a,Q);if(4!=b.length||" in "!=b[1]||""!==b[3])throw new l("Invalid ForNode expression: "+a);this.loopVars=b[0].split(R);this.listVar=new q(b[2])};v.prototype.render=function(a){var b=this.listVar.resolve(a),c=[],d={parentloop:a.get("forloop",{})},e=b.length,f;if(1>b.length)return t(this.emptyContents,a);a.push();a.set("forloop",d);for(var g=0;g<e;g++)f=b[g],1===this.loopVars.length?a.set(this.loopVars[0],
f):a.zip(this.loopVars,f),d.counter=g+1,d.counter0=g,d.revcounter=e-g,d.revcounter0=e-g-1,d.first=0===g,d.last=g===e-1,c.push.apply(c,t(this.contents,a));a.pop();return c};p.inherits(y,o);y.prototype.render=function(){return[]};p.inherits(H,o);H.prototype._parseExpr=function(){var a=p.lookup("( ) && || == === <= < >= > != !== !! !".split(" ")),b=/(\(|\)|&&|\|\||={2,3}|<=|<|>=|>|!={1,2}|!{1,2})/,c=/^-?(?:\d+(?:\.\d+)?|(?:\d+)?\.\d+)$/,d=p.lookup(['"',"'"]),f=function(a){var b=a.charAt(0);return 1<
a.length&&"undefined"!=typeof d[b]&&a.lastIndexOf(b)==a.length-1};return function(d){for(var g=["return ("],h=N(d,b),i=0,k=h.length,j;i<k;i++)j=h[i],"undefined"!=typeof a[j]?g.push(j):(j=j.replace(O,""))&&(c.test(j)||f(j)?g.push(j):g.push('new FilterExpression("'+e(j)+'").resolve(c, true)'));g.push(");");try{var m=new Function("c","FilterExpression",g.join(" "));return function(a){return m(a,u)}}catch(n){throw new l("Invalid $if expression ("+n.message+"): "+d);}}}();H.prototype.render=function(a){return t(this.test(a)?
this.contents:this.elseContents,a)};p.inherits(I,o);I.prototype.render=function(){return[]};p.inherits(C,o);C.prototype._parseExpr=function(a){for(var b=["var a = []"],a=N(a,M),c=0,d=a.length,f;c<d;c++)f=a[c],c%2?b.push('a.push(new Variable("'+e(f.replace(O,""))+'").resolve(c))'):f&&b.push('a.push("'+e(f)+'")');b.push("return a");var g=new Function("c","Variable",b.join(";"));return function(a){return g(a,q)}};C.prototype.render=function(a){return this.dynamic?this.func(a):[this.text]};p.inherits(F,
o);F.cycleId=1;F.prototype.render=function(a){var b=a.renderContext.get(this.id,0),c=this.values[b];a.renderContext.set(this.id,(b+1)%this.values.length);c instanceof q&&(c=c.resolve(a));this.variableName&&a.set(this.variableName,c);return this.silent?[]:c};p.inherits(A,o);A.prototype.render=function(){var a=P[this.version]||"";return J.html?J.html.markSafe(a):a};J.addMode({name:"template",createElement:function(a,b,c){return new x(a,b,c)},textNode:function(a){return a},fragment:function(a){return a},
isModeObject:function(a){return a instanceof o||a instanceof q},api:{DOCTYPES:P,templates:L,ContextPopError:k,VariableNotFoundError:h,TemplateSyntaxError:l,TemplateNotFoundError:g,renderTemplate:j,getTemplate:r,selectTemplate:E,FilterExpression:u,Variable:q,Context:s,RenderContext:w,BlockContext:n,Template:d,TemplateNode:o,BlockNode:i,IncludeNode:c,ElementNode:x,ForNode:v,EmptyNode:y,IfNode:H,ElseNode:I,TextNode:C,CycleNode:F},apply:{Context:s,renderTemplate:j,$template:function(a){return new d(a,
D.flatten(G.call(arguments,1)))},$doctype:function(a){return new A(a)},$block:function(a){return new i(a,D.flatten(G.call(arguments,1)))},$include:function(a,b,d){return new c(a,b,d)},$var:function(a){return new q(a)},$func:function(a){return new q(a,!1)},$text:function(a){return new C(a)},$for:function(a){return new v(a,D.flatten(G.call(arguments,1)))},$empty:function(){return new y(D.flatten(G.call(arguments)))},$if:function(a){return new H(a,D.flatten(G.call(arguments,1)))},$else:function(){return new I(D.flatten(G.call(arguments)))},
$cycle:function(a,b){return new F(a,b)}}})});r.define("DOMBuilder",function(b,m,a){m=a("./dombuilder/core");a("./dombuilder/dom");a("./dombuilder/html");a("./dombuilder/template");b.exports=m});window.DOMBuilder=A.DOMBuilder})();